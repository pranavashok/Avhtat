(function(b){b.fn.ticker=function(p){var d=b.extend({},b.fn.ticker.defaults,p),h="#"+b(this).attr("id"),i=b(this).attr("tagName");return this.each(function(){function e(c){var j=0,k;for(k in c)c.hasOwnProperty(k)&&j++;return j}function f(c){if(d.debugMode)window.console&&window.console.log?window.console.log(c):alert(c)}function l(){if(a.contentLoaded==false){if(d.ajaxFeed)f("Code Me!");else if(d.htmlFeed)if(b(h+" LI").length>0)b(h+" LI").each(function(c){a.newsArr["item-"+c]={type:d.titleText,content:b(this).html()}});
else{f("Couldn't find any content for the ticker to use!");return false}else{f("Couldn't find any content for the ticker to use!");return false}a.contentLoaded=true}b(a.dom.titleElem).html(a.newsArr["item-"+a.position].type);b(a.dom.contentID).html(a.newsArr["item-"+a.position].content);if(a.position==e(a.newsArr)-1)a.position=0;else a.position++;distance=b(a.dom.contentID).width();time=distance/d.speed;b(a.dom.wrapperID).find(a.dom.titleID).fadeIn().end().find(a.dom.titleElem).fadeIn("slow",q)}function q(){if(a.play){var c=
b(a.dom.titleElem).width()+20;b(a.dom.revealID).css("left",c+"px");b(a.dom.revealElem).show(1,function(){b(a.dom.contentID).css("left",c+"px").show();b(a.dom.revealID).css("margin-left","0px").animate({zoom:1},20).animate({marginLeft:distance+"px"},time,"linear",m)})}else return false}function m(){if(a.play){b(a.dom.contentID).animate({zoom:1},d.pauseOnItems).fadeOut("slow");b(a.dom.revealID).hide(1,function(){b(a.dom.tickerID).animate({zoom:1},d.pauseOnItems).fadeOut(d.fadeOutSpeed,function(){b(a.dom.wrapperID).find(a.dom.titleElem+
","+a.dom.revealElem+","+a.dom.contentID).hide().end().find(a.dom.tickerID+","+a.dom.revealID+","+a.dom.titleID).show().end().find(a.dom.tickerID+","+a.dom.revealID+","+a.dom.titleID).removeAttr("style");l()})})}else b(a.dom.revealElem).hide()}function g(){a.play=false;b(a.dom.tickerID+","+a.dom.revealID+","+a.dom.titleID+","+a.dom.titleElem+","+a.dom.revealElem+","+a.dom.contentID).stop(true,true);b(a.dom.revealID+","+a.dom.revealElem).hide();b(a.dom.wrapperID).find(a.dom.titleID+","+a.dom.titleElem).show().end().find(a.dom.contentID).show()}
function n(){a.play=true;a.paused=false;m()}function o(c){g();switch(c){case "prev":a.position=a.position==0?e(a.newsArr)-2:a.position==1?e(a.newsArr)-1:a.position-2;b(a.dom.titleElem).html(a.newsArr["item-"+a.position].type);b(a.dom.contentID).html(a.newsArr["item-"+a.position].content);break;case "next":b(a.dom.titleElem).html(a.newsArr["item-"+a.position].type);b(a.dom.contentID).html(a.newsArr["item-"+a.position].content);break}if(a.position==e(a.newsArr)-1)a.position=0;else a.position++}var a=
{position:0,time:0,distance:0,newsArr:{},play:true,paused:false,contentLoaded:false,dom:{contentID:"#ticker-content",titleID:"#ticker-title",titleElem:"#ticker-title SPAN",tickerID:"#ticker",wrapperID:"#ticker-wrapper",revealID:"#ticker-swipe",revealElem:"#ticker-swipe SPAN",controlsID:"#ticker-controls",prevID:"#prev",nextID:"#next",playPauseID:"#play-pause"}};if(i!="UL"&&d.htmlFeed===true){f("Cannot use <"+i.toLowerCase()+"> type of element for this plugin - must of type <ul>");return false}(function(){b(a.dom.wrapperID).append('<div id="'+
a.dom.tickerID.replace("#","")+'"><div id="'+a.dom.titleID.replace("#","")+'"><span style="display: none;"><!-- --\></span></div><p id="'+a.dom.contentID.replace("#","")+'"></p><div id="'+a.dom.revealID.replace("#","")+'"><span style="display: none;"><!-- --\></span></div></div>');b(a.dom.wrapperID).removeClass("no-js").addClass("has-js");b(a.dom.tickerElem+","+a.dom.titleElem+","+a.dom.contentID).hide();if(d.controls){b(a.dom.controlsID).live("click",function(c){c=c.target.id;switch(c){case a.dom.prevID.replace("#",
""):a.paused=true;b(a.dom.playPauseID).addClass("paused");o(c);break;case a.dom.nextID.replace("#",""):a.paused=true;b(a.dom.playPauseID).addClass("paused");o(c);break;case a.dom.playPauseID.replace("#",""):if(a.play==true){a.paused=true;b(a.dom.playPauseID).addClass("paused");g()}else{a.paused=false;b(a.dom.playPauseID).removeClass("paused");n()}break}}).live("mouseover",function(c){c=c.target.id;b("#"+c).hasClass("controls")&&b("#"+c).addClass("over")}).live("mousedown",function(c){c=c.target.id;
b("#"+c).hasClass("controls")&&b("#"+c).addClass("down")}).live("mouseout",function(c){c=c.target.id;b("#"+c).hasClass("controls")&&b("#"+c).removeClass("over")}).live("mouseup",function(c){c=c.target.id;b("#"+c).hasClass("controls")&&b("#"+c).removeClass("down")});b(a.dom.wrapperID).append('<ul id="'+a.dom.controlsID.replace("#","")+'"><li id="'+a.dom.playPauseID.replace("#","")+'" class="controls"></li><li id="'+a.dom.prevID.replace("#","")+'" class="controls"></li><li id="'+a.dom.nextID.replace("#",
"")+'" class="controls"></li></ul>')}b(a.dom.contentID).mouseover(function(){a.paused==false&&g()}).mouseout(function(){a.paused==false&&n()});l()})()})};b.fn.ticker.defaults={speed:0.1,ajaxFeed:false,htmlFeed:true,debugMode:true,controls:true,titleText:"Updates>",pauseOnItems:2E3,fadeInSpeed:300,fadeOutSpeed:300}})(jQuery);